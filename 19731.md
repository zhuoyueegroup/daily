主  题：日报

日  期：2019年7月31日 星期三

内  容：

今天总结的知识点：

**1.垃圾回收机制**

**内存泄漏**：不再用到的内存，没有及时释放，就叫做内存泄漏。

**垃圾回收机制**：解决内存的泄露，垃圾回收机制会定期（周期性）找出那些不再用到的内存（变量），然后释放其内存。

各大浏览器通常采用的垃圾回收机制有两种方法：**标记清除 引用计数**

**标记清除：**当变量进入环境时，例如，在一个函数中声明一个变量，就将这个变量标记为"进入环境"，而当变量离开环境时，则将其标记为"离开环境"。垃圾回收机制会在运行的时候给存储在内存中的所有变量都加上标记，除了处在环境中的变量及被环境中的变量引用的变量标记（闭包），而在此之后剩下的带有标记的变量被视为准备删除的变量。最后垃圾回收机制到下一个周期运行时，将释放这些变量的内存，回收它们所占用的空间。

IE、Firefox、Opera、Chrome、Safari的js实现使用用的都是标记清除的垃圾回收策略，不过垃圾收集的时间间隔不同

**引用计数：**语言引擎有一张"引用表"，保存了内存里面所有资源（通常是各种值）的引用次数。如果一个值的引用次数是0，就表示这个值不再用到了，因此可以将这块内存释放。如果一个值不再需要了，引用数却不为0，垃圾回收机制无法释放这块内存，循环引用的时候就会释放不掉内存，从而导致内存泄漏。

Let arr = [1,2,3];

Console.log(“hello world”); //此时[1,2,3]仍然存在内存中，因为arr引用了它们，引用次数为1

arr = null //对arr重置为null，就解决了对[1,2,3]的引用，内存就释放出来了

 

**拓展：常见的内存泄露及解决方法;**

\1.    意外的全局变量引起的内存泄露，

js中如果不适用var声明变量，该变量会被视为window对象的属性

function foo(arg) {

​    bar = "this is a hidden global variable";  // 等价于window.bar = "this is an explicit global variable";

}

解决：使用严格模式避免。

2.被遗忘的定时器或回调

var someResource = getData();

setInterval(function() {

​    var node = document.getElementById('Node');

​    if(node) {

​        node.innerHTML = JSON.stringify(someResource));

​    }

}, 1000);

如果id为Node的元素从DOM中移除, 该定时器仍会存在, 同时, 因为回调函数中包含对someResource的引用, 定时器外面的someResource也不会被释放.

解决：手动删除定时器和dom。

3.dom清除或删除时，事件未清除导致的内存泄露

<div
id="container"></div> 

$('#container').bind('click', function(){

​    console.log('click');

}).remove();//导致内存泄漏

//修改

$('#container').bind('click', function(){

​    console.log('click');

}).off('click').remove();

 

解决：手动删除。

4.闭包引起的内存泄露

![img](file:///C:\Users\lenovo\AppData\Local\Temp\msohtml1\01\clip_image002.jpg)

解决：将事件处理函数定义在外部，解除闭包,或者在定义事件处理函数的外部函数中，删除对dom的引用。

5.子元素存在引用引起的内存泄露

div中的ul li  得到这个div，会间接引用某个得到的li，那么此时因为div间接引用li，即使li被清空，也还是在内存中，并且只要li不被删除，他的父元素都不会被删除。

**2.****如何实现一个文字溢出后面加省略号代替的效果**

/* 单行隐藏 */

​        overflow: hidden;

​        /* 隐藏文本 */

​        text-overflow: ellipsis;

​        /* text-overflow:clip|ellipsis默认是clip，溢出裁剪不显示（...） */

​        white-space: nowrap;

​        /* 不换行 */

​        width: 200px;

 

/* 多行文本最后一行溢出显示省略号 */

​        display: -webkit-box;

​        overflow: hidden;

​        text-overflow: ellipsis;

​        /* word-break: break-all; */

​        -moz-box-orient: vertical; /*从上到下自动排列子元素*/

​        -webkit-line-clamp:2;/*显示的行数*/

​        -webkit-box-orient: vertical; /*从上向下垂直排列子元素。*/

​        width: 150px;

明天的计划：

继续完善vue组建，复习面试题